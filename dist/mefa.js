var t=function(){function t(t){this.frame=t,this.subSystems={},this.currentApp="",this.currentRoute=""}return t.prototype.registerApplication=function(t){var e=t.app,s=t.route,i=t.link;if(e&&s&&i)if(this.currentRoute||(this.currentRoute=s),this.currentApp||(this.currentApp=e,this.frame.src=i),this.checkDuplicatedApp(e)){if(!this.checkDuplicatedRoute(e,s)){this.subSystems[e].route.push(s)}}else this.subSystems[e]={link:i,route:[s]}},t.prototype.navigateTo=function(t){var e=t.app,s=t.route;this.isInSameSystem(e)?this.isInSamePage(e,s)||(this.navigateInSystem(e,s),this.updateApp(e,s)):(this.navigateOutSystem(e),this.updateApp(e,s))},t.prototype.checkDuplicatedApp=function(t){return this.subSystems.hasOwnProperty(t)},t.prototype.checkDuplicatedRoute=function(t,e){return this.subSystems[t].route.indexOf(e)>-1},t.prototype.navigateInSystem=function(t,e){this.frame.contentWindow.postMessage({route:e},"*")},t.prototype.navigateOutSystem=function(t){this.frame.src=this.subSystems[t].link},t.prototype.isInSameSystem=function(t){return this.currentApp&&this.currentApp===t},t.prototype.isInSamePage=function(t,e){return this.isInSameSystem(t)&&this.currentRoute&&this.currentRoute===e},t.prototype.updateApp=function(t,e){this.currentApp=t,this.currentRoute=e},t.onRouteUpdate=function(t){window.addEventListener("message",function(e){e.data&&t(e.data.route)})},t}();module.exports=t;
//# sourceMappingURL=mefa.js.map

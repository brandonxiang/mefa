!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.mefa=e()}(this,function(){"use strict";return function(){function t(t){this.frame=t,this.subSystems={},this.currentApp="",this.currentRoute=""}return t.prototype.registerApplication=function(t){var e=t.app,i=t.route,n=t.link;if(e&&i&&n)if(this.currentRoute||(this.currentRoute=i),this.currentApp||(this.currentApp=e,this.frame.src=n),this.checkDuplicatedApp(e)){if(!this.checkDuplicatedRoute(e,i)){this.subSystems[e].route.push(i)}}else this.subSystems[e]={link:n,route:[i]}},t.prototype.navigateTo=function(t){var e=t.app,i=t.route;this.isInSameSystem(e)?this.isInSamePage(e,i)||(this.navigateInSystem(e,i),this.updateApp(e,i)):(this.navigateOutSystem(e),this.updateApp(e,i))},t.prototype.checkDuplicatedApp=function(t){return this.subSystems.hasOwnProperty(t)},t.prototype.checkDuplicatedRoute=function(t,e){return this.subSystems[t].route.indexOf(e)>-1},t.prototype.navigateInSystem=function(t,e){this.frame.contentWindow.postMessage({route:e},"*")},t.prototype.navigateOutSystem=function(t){var e=this.subSystems[t].link;this.frame.src=e},t.prototype.isInSameSystem=function(t){return this.currentApp&&this.currentApp===t},t.prototype.isInSamePage=function(t,e){return this.isInSameSystem(t)&&this.currentRoute&&this.currentRoute===e},t.prototype.updateApp=function(t,e){this.currentApp=t,this.currentRoute=e},t.onRouteUpdate=function(t){window.addEventListener("message",function(e){e.data&&t(e.data.route)})},t}()});
//# sourceMappingURL=mefa.min.js.map

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.Mefa={})}(this,function(t){"use strict";var e=Object.freeze({onRouteUpdate:function(t){window.addEventListener("message",function(e){e.data&&"ROUTECHANGE"===e.data.message&&t(e.data.route)})}}),r=function(t){throw console.error(t),new Error(t)},i=function(){function t(t){this.subSystems={},this.currentApp="",this.currentRoute="",this.frame=t}return t.prototype.registerApplication=function(t){var e=t.app,i=t.route,n=t.link;if(this.frame||r("Initailization Error!"),e&&n||r('Parameters "app" and "link" are required!'),this.currentApp||(this.currentRoute||(this.currentRoute=i),this.currentApp=e,this.frame.src=n),this.checkDuplicatedApp(e)){if(!this.checkDuplicatedRoute(e,i)){this.subSystems[e].route.push(i)}}else this.subSystems[e]=i?{link:n,route:[i]}:{link:n,route:[]}},t.prototype.navigateTo=function(t){var e=t.app,i=t.route;e||r('Parameter "app" is required!'),this.isInSameSystem(e)?this.isInSamePage(e,i)||(this.navigateInSystem(i),this.updateApp(e,i)):(this.navigateOutSystem(e,i),this.updateApp(e,i))},t.prototype.checkDuplicatedApp=function(t){return this.subSystems.hasOwnProperty(t)},t.prototype.checkDuplicatedRoute=function(t,e){return!e||this.subSystems[t].route.indexOf(e)>-1},t.prototype.navigateInSystem=function(t){var e={message:"ROUTECHANGE",route:t};this.frame.contentWindow.postMessage(e,"*")},t.prototype.navigateOutSystem=function(t,e){var r=this.subSystems[t].link;this.frame.src=r},t.prototype.isInSameSystem=function(t){return this.currentApp&&this.currentApp===t},t.prototype.isInSamePage=function(t,e){return this.isInSameSystem(t)&&this.currentRoute&&this.currentRoute===e},t.prototype.updateApp=function(t,e){this.currentApp=t,this.currentRoute=e},t}();t.Mefa=i,t.appMefa=e,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=mefa.min.js.map
